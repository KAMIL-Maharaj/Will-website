@model IEnumerable<Alabaster.Models.Testimony>
@{
    ViewBag.Title = "Testimonies";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <style>
        body { 
            margin:0; 
            padding:0; 
            background:url('../images/Background4.jpg') center/cover no-repeat fixed; 
            font-family:'Poppins',Arial,sans-serif; 
            color:#fff; 
            font-size:1rem; 
        }
        body::before { 
            content:""; 
            position:fixed; 
            top:0; left:0; right:0; bottom:0; 
            background:rgba(0,0,0,0.7); 
            z-index:-1; 
        }
        .page-content { 
            padding-bottom:4rem; 
        }
        .hero { 
            width:100%; 
            padding:2rem 0; 
            display:flex; 
            justify-content:center; 
            margin-bottom:2rem; 
            text-align:center; 
        }
        .hero-content { 
            max-width:700px; 
            padding:1rem; 
            color:#fff; 
        }
        .hero-content h1 { 
            font-size:3rem; 
            font-weight:900; 
            margin-bottom:1rem; 
            text-transform:uppercase; 
            text-shadow:2px 2px 8px rgba(0,0,0,0.5); 
        }
        .hero-content a.hero-cta { 
            display:inline-block; 
            margin-top:1.25rem; 
            padding:0.75rem 1.5rem; 
            background:#fff; 
            color:#ff9800; 
            border-radius:25px; 
            font-weight:700; 
            font-size:1rem; 
            text-decoration:none; 
            box-shadow:0 6px 12px rgba(0,0,0,0.25); 
            transition:all 0.3s ease; 
        }
        .hero-content a.hero-cta:hover { 
            background:#ffcc00; 
            color:#333; 
            transform:translateY(-3px); 
            box-shadow:0 8px 20px rgba(0,0,0,0.35); 
        }
        .section-title { 
            text-align:center; 
            font-size:2rem; 
            font-weight:900; 
            margin-bottom:2rem; 
            color:#ffcc00; 
            text-shadow:2px 2px 6px rgba(0,0,0,0.7); 
        }
        .testimony-grid { 
            display:grid; 
            grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); 
            gap:2rem; 
            padding:0 4%; 
        }
        .testimony-card { 
            background:#fff; 
            border-radius:0.75rem; 
            box-shadow:0 8px 24px rgba(0,0,0,0.25); 
            overflow:hidden; 
            display:flex; 
            flex-direction:column; 
            align-items:center; 
            text-align:center; 
            padding:1.25rem; 
            color:#333; 
            transition: transform 0.3s ease, box-shadow 0.3s ease; 
            opacity:0; 
            animation:fadeInUp 0.6s ease forwards; 
        }
        .testimony-card:hover { 
            transform:translateY(-5px) scale(1.03); 
            box-shadow:0 12px 24px rgba(0,0,0,0.3); 
        }
        .testimony-card img { 
            width:100%; 
            aspect-ratio:4/3; 
            object-fit:cover; 
            border-radius:0.5rem; 
            margin-bottom:1rem; 
        }
        .testimony-card h4 { 
            font-size:1.25rem; 
            font-weight:800; 
            color:#222; 
            margin-bottom:0.75rem; 
        }
        .testimony-card p { 
            font-size:1rem; 
            color:#555; 
            margin-bottom:1rem; 
            line-height:1.5; 
        }
        .testimony-card small { 
            display:block; 
            color:#888; 
            font-size:0.9rem; 
            margin-top:0.25rem; 
        }
        .no-testimonies { 
            grid-column:1/-1; 
            text-align:center; 
            font-size:1.2rem; 
            color:#ffcc00; 
            margin:2rem 0; 
        }
        .testimony-card:nth-child(1) { animation-delay:0.1s; }
        .testimony-card:nth-child(2) { animation-delay:0.25s; }
        .testimony-card:nth-child(3) { animation-delay:0.4s; }
        @@keyframes fadeInUp { 
            from { opacity:0; transform:translateY(15px); } 
            to { opacity:1; transform:translateY(0); } 
        }
    </style>
}

<div class="page-content">
    <div class="hero">
        <div class="hero-content">
            <h1>Testimonies</h1>
            <a asp-controller="Testimonies" asp-action="Create" class="hero-cta">Share Your Testimony</a>
        </div>
    </div>

    <h2 class="section-title">Voices From Our Community</h2>

    <div class="testimony-grid">
        @if (!Model.Any())
        {
            <div class="no-testimonies">✨ No testimonies yet. Be the first to inspire others!</div>
        }
        else
        {
            foreach (var item in Model.OrderByDescending(t => t.CreatedAt))
            {
                <div class="testimony-card">
                    <img src="@(string.IsNullOrEmpty(item.ImageBase64) 
                                ? Url.Content("~/Images/Default%20image.png") 
                                : $"data:image/jpeg;base64,{item.ImageBase64}")" 
                         alt="Testimony Image" />
                    <h4>@item.Title</h4>
                    <p>@item.Description</p>
                    <small>By: @(string.IsNullOrEmpty(item.CreatedBy) ? "Anonymous" : item.CreatedBy)</small>
                    <small>Date: @item.CreatedAt</small>
                </div>
            }
        }
    </div>
</div>
